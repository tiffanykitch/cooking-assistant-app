/* Global smooth transitions */
* { transition: color .3s ease-out, background-color .3s ease-out, box-shadow .3s ease-out, transform .3s ease-out, filter .3s ease-out; }

/* Animations */
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(198,166,100,0.7); } 70% { box-shadow: 0 0 0 15px rgba(198,166,100,0); } 100% { box-shadow: 0 0 0 0 rgba(198,166,100,0); } }
@keyframes pulseScale { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
@keyframes ring { 0% { transform: scale(0.9); opacity: .3; } 70% { transform: scale(1.3); opacity: 0; } 100% { opacity: 0; } }
@keyframes fadeSection { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
@keyframes barDance {
  0% { transform: scaleY(0.4); }
  25% { transform: scaleY(1.2); }
  50% { transform: scaleY(0.7); }
  75% { transform: scaleY(1); }
  100% { transform: scaleY(0.4); }
}

/* Typing indicator */
.typing-indicator { display: inline-flex; gap: 6px; align-items: center; }
.typing-indicator span { display: inline-block; width: 6px; height: 6px; border-radius: 50%; background-color: #DAA520; animation: bounce 1.4s infinite ease-in-out both; }
.typing-indicator span:nth-child(1) { animation-delay: -0.32s; } .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

/* Base */
body { margin: 0; padding: 0; background-color: #F4E4C1; color: #654321; font-family: Inter, "Inter var", "SF Pro Text", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-smooth: antialiased; }

/* Landing hero wrapper with warm gradient + noise */
.hero { min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; background: linear-gradient(135deg, #F4E4C1 0%, #E8D5B7 100%); padding: 4.5rem 1.5rem; position: relative; }
.hero::after { content: ""; position: absolute; inset: 0; pointer-events: none; background: radial-gradient(60% 50% at 50% 30%, rgba(255,255,255,.14), rgba(0,0,0,0) 60%); }
.hero::before { content: ""; position: absolute; inset: 0; pointer-events: none; opacity: .08; mix-blend-mode: soft-light; background-image: repeating-linear-gradient(0deg, rgba(0,0,0,.02), rgba(0,0,0,.02) 1px, transparent 1px, transparent 3px); }

/* Headline/Subtext */
.hero .title { color: #8B4513; font-size: clamp(26px, 3.8vw, 42px); font-weight: 800; letter-spacing: -0.01em; line-height: 1.05; text-shadow: 0 1px 2px rgba(139,69,19,.15); }
.hero .subtitle { color: #A0522D; font-size: clamp(16px, 2.3vw, 22px); font-weight: 600; line-height: 1.45; text-shadow: 0 1px 1px rgba(139,69,19,.1); }
.hero .stack { display: grid; gap: 24px; animation: fadeSection .5s ease-out both; }
.container { width: 100%; max-width: 560px; margin: 0 auto; text-align: center; }

/* Separator */
.separator { width: 100%; height: 1px; background: linear-gradient(90deg, transparent, rgba(139,69,19,.18), transparent); margin: 36px 0; }

/* CTA caption */
.hero .cta-copy { font-size: 22px; color: #8B4513; text-shadow: 0 1px 1px rgba(139,69,19,.1); font-weight: 600; margin-top: 18px; }

/* Enhanced mic button in terracotta */
.mic-button, .cta-mic { width: 100px !important; height: 100px !important; border-radius: 50% !important; border: none !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; color: #fff !important; background: linear-gradient(135deg,#D2691E 0%, #CD853F 100%) !important; box-shadow: 0 12px 30px rgba(139,69,19,.25), 0 0 40px rgba(210,105,30,.30); animation: pulseScale 2s infinite; position: relative; }
.mic-button:hover, .cta-mic:hover { transform: scale(1.06); box-shadow: 0 16px 44px rgba(139,69,19,.32), 0 0 60px rgba(210,105,30,.38); }
.cta-mic.listening::before, .cta-mic.listening::after { content: ""; position: absolute; inset: -8px; border-radius: 50%; box-shadow: 0 0 0 2px rgba(210,105,30,.2); animation: ring 1.6s infinite; }
.cta-mic.listening::after { animation-delay: .6s; }
.cta-mic .waves { position: absolute; bottom: 18px; display: inline-flex; gap: 4px; }
.cta-mic .waves i { width: 3px; height: 8px; background: rgba(255,255,255,.9); border-radius: 2px; animation: bounce 1.4s infinite ease-in-out both; }

/* Chat preview container */
.hero-preview { background: rgba(255,255,255,0.38); backdrop-filter: blur(14px); border-radius: 28px; box-shadow: 0 24px 60px rgba(139,69,19,.22), inset 0 1px 0 rgba(255,255,255,.45); padding: 30px 28px; gap: 18px; animation: fadeSection .6s ease-out both; }

/* Warm glass bubbles */
.hero-preview .chat-bubble { max-width: 68ch; background: #FFF8F0; color: #654321; border-radius: 20px; padding: 16px 20px; box-shadow: 0 8px 24px rgba(139,69,19,0.12); line-height: 1.45; font-size: 22px; backdrop-filter: blur(10px); border: 1px solid rgba(255,248,240,.7); }
/* User bubble soft peach */
.hero-preview .chat-message.user .chat-bubble { background: #FFE5CC !important; color: #654321 !important; }
/* Ensure right edge alignment */
.hero-preview .chat-row:not(.user) .chat-bubble { margin-right: 36px; }

/* Badges / accents */
.hero-preview .badge { width: 26px; height: 26px; background: #fffaf3; border: 1.5px solid; box-shadow: 0 4px 16px rgba(139,69,19,0.12); }
.hero-preview .badge--chef { border-color: #DAA520; color: #DAA520; }
.hero-preview .badge--user { border-color: #DAA520; color: #DAA520; }
.hero-preview .chat-row .badge--chef, .hero-preview .chat-row .badge--user { align-self: center; transform: translateY(-1px); }

/* Light chat overrides */
.light-chat .chat-app, .light-chat main { background: transparent; color: #654321; }
.light-chat .chat-bubble { background: #FFF8F0; color: #654321; box-shadow: 0 8px 24px rgba(139,69,19,0.12); border-radius: 20px !important; padding: 16px 20px; line-height: 1.45; font-size: 22px; max-width: 68ch; backdrop-filter: blur(10px); border: 1px solid rgba(255,248,240,.7); }
.light-chat .chat-message.user .chat-bubble { background: #FFE5CC; }
.light-chat .chat-message.user .chat-bubble, .light-chat .chat-message.assistant .chat-bubble { border-bottom-right-radius: 20px; border-bottom-left-radius: 20px; }

/* Layout alignment helpers */
.hero-preview .chat-row { display: inline-grid; grid-template-columns: 36px auto; column-gap: 10px; align-items: center; width: auto; margin-left: 0; margin-right: auto; }
.hero-preview .chat-row.user { grid-template-columns: auto 36px; margin-left: auto; margin-right: 0; }
.hero-preview .chat-message { width: auto; }

/* Inputs / header */
.light-chat header, .light-chat .chat-input-area { background: transparent; border-color: rgba(139,69,19,0.15); }
.light-chat .chat-input { background: #ffffff; color: #654321; border-color: #E8D5B7; border-radius: 16px; }
.light-chat .chat-input:focus { border-color: #DAA520; }
.light-chat .chat-send { border-color: #DAA520; color: #654321; border-radius: 16px; }
.light-chat .chat-send:hover { background: #DAA520; color: #F4E4C1; }

/* Section spacing */
.section { padding: 48px 0; }
.section.section-lg { padding: 72px 0; }

/* Accent links */
a, .highlight { color: #DAA520; }

/* Messages: warm, clear alignment */
.msg-row { display: flex; width: 100%; margin: 8px 16px; }
.msg-row.user { justify-content: flex-end; }
.msg-row.assistant { justify-content: flex-start; }

.bubble { padding: 14px 18px; border-radius: 18px; max-width: 72ch; line-height: 1.45; box-shadow: 0 8px 24px rgba(139,69,19,.12); position: relative; }
.bubble.user { background: #FFE5CC; color: #654321; }
.bubble.user.transcribing { opacity: .8; border: 1px dashed rgba(101,67,33,.35); }
.bubble.assistant { background: #FFF8F0; color: #654321; }

/* Inline playback for chef responses */
.bubble.assistant .playback { position: absolute; right: 8px; bottom: 8px; border: none; background: transparent; color: #A0522D; cursor: pointer; }
.bubble.assistant .playback:hover { transform: scale(1.05); }

/* Onboarding hint */
.onboarding-hint { text-align: center; margin: 12px 16px 8px; color: #8B4513; font-weight: 600; opacity: .85; }

/* Voice Dock (sticky) */
.voice-dock { position: sticky; bottom: 0; left: 0; right: 0; z-index: 10; display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; padding: 16px 16px 20px; background: linear-gradient(180deg, rgba(244,228,193,.8), rgba(232,213,183,.98)); backdrop-filter: blur(6px); border-top: 1px solid rgba(139,69,19,.15); }
.voice-status { grid-column: 1 / span 1; display: flex; align-items: center; gap: 12px; }
.status { font-weight: 600; color: #8B4513; }
.status.idle { opacity: .75; }

/* Waveform bars */
.waveform { display: inline-flex; gap: 3px; height: 14px; align-items: flex-end; }
.waveform i { width: 3px; height: 4px; background: #DAA520; border-radius: 2px; opacity: .4; transform-origin: bottom; transition: height .18s ease; }
.waveform.active i { animation: barDance 900ms ease-in-out infinite; }
.waveform.active i:nth-child(odd){ animation-duration: 1100ms }
.waveform.active i:nth-child(2){ animation-delay: .1s }
.waveform.active i:nth-child(3){ animation-delay: .2s }
.waveform.active i:nth-child(4){ animation-delay: .3s }
.waveform.active i:nth-child(5){ animation-delay: .4s }

/* Big pulsing mic CTA */
.mic-cta { grid-column: 2; justify-self: center; width: 108px; height: 108px; border-radius: 999px; border: none; background: linear-gradient(135deg,#D2691E,#CD853F); box-shadow: 0 10px 30px rgba(139,69,19,.22), 0 0 40px rgba(210,105,30,.24); color: #fff; display: flex; align-items: center; justify-content: center; animation: pulseScale 2s infinite; }
.mic-cta.listening { animation: pulseScale 1.4s infinite; box-shadow: 0 12px 36px rgba(139,69,19,.28), 0 0 56px rgba(210,105,30,.34); }
.mic-cta.speaking { box-shadow: 0 10px 34px rgba(139,69,19,.26), 0 0 60px rgba(210,105,30,.38); filter: saturate(1.05); }
.mic-cta.thinking { animation: none; opacity: .8; box-shadow: 0 8px 24px rgba(139,69,19,.18), 0 0 24px rgba(210,105,30,.20); }

/* Fallback input (secondary) */
.fallback { grid-column: 3; justify-self: end; }
.fallback-input { width: 220px; padding: 10px 12px; border-radius: 12px; border: 1px solid #E8D5B7; background: #fff; color: #654321; }

/* Icon wrappers (optional sizing helpers) */
.icon--chef, .icon--user { color: #8B4513; }

/* Emoji rendering tweak: keep baseline stable and prevent clipping */
.bubble { line-height: 1.45; }
.bubble :where(span, p, div) { line-height: inherit; }
.bubble { text-rendering: optimizeLegibility; }
/* Prevent emoji from appearing as a separate block or oversized */
.bubble :where(p, div) { word-break: break-word; }
.bubble { overflow-wrap: anywhere; }
